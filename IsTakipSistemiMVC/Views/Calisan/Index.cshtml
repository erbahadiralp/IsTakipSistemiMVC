@model IsTakipSistemiMVC.Models.Personeller

@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutCalisan.cshtml";
    var sonDuyurular = ViewBag.SonDuyurular as List<IsTakipSistemiMVC.Models.Duyurular>;
}

<div class="container mt-4">
    <div class="row">

        <!-- Duyurular Kartı -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm small-card card-color-1 h-100">
                <div class="card-body text-center">
                    <h4 class="card-title">Duyurular</h4>
                    @if (sonDuyurular != null && sonDuyurular.Any())
                    {
                        foreach (var duyuru in sonDuyurular)
                        {
                            <div class="announcement-card mb-3">
                                <h6>@duyuru.duyuruBaslik</h6>
                                <p class="card-text">@duyuru.duyuruIcerik</p>
                                <p class="card-text"><small class="text-muted">@duyuru.duyuruTarih.ToShortDateString()</small></p>
                            </div>
                        }
                    }
                    else
                    {
                        <p class="card-text">Henüz duyuru bulunmamaktadır.</p>
                    }
                </div>
            </div>
        </div>

        <!-- İş Duyuru Kartı -->
        <div class="col-lg-6 mb-4">
            @if (ViewBag.isler != null && ViewBag.isler.Count > 0)
            {
                <div id="jobCarousel" class="carousel slide" data-ride="carousel">
                    <div class="carousel-inner">
                        @for (int i = 0; i < ViewBag.isler.Count; i++)
                        {
                            var isItem = ViewBag.isler[i];
                            <div class="carousel-item @(i == 0 ? "active" : "")">
                                <div class="card border-info shadow-sm job-card">
                                    <div class="card-header text-center">
                                        Yeni İş!!!
                                    </div>
                                    <div class="card-body">
                                        <input type="hidden" name="isId" value="@isItem.isId" />
                                        <div class="mb-2 font-weight-bold">
                                            @isItem.isBaslik
                                        </div>
                                    </div>
                                    <div class="card-footer text-center">
                                        <form action="@Url.Action("Index", "Calisan")" method="post">
                                            <input type="hidden" name="isId" value="@isItem.isId" />
                                            <button type="submit" class="btn btn-outline-info">Okundu İşaretle</button>
                                        </form>
                                    </div>
                                </div>
                            </div>
                        }
                    </div>
                    <a class="carousel-control-prev" href="#jobCarousel" role="button" data-slide="prev">
                        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                        <span class="sr-only">Previous</span>
                    </a>
                    <a class="carousel-control-next" href="#jobCarousel" role="button" data-slide="next">
                        <span class="carousel-control-next-icon" aria-hidden="true"></span>
                        <span class="sr-only">Next</span>
                    </a>
                </div>
            }
            else
            {
                <div class="card shadow-sm alert-warning">
                    <div class="card-body">
                        <h5 class="card-title">İş</h5>
                        <p class="card-text">Yeni işiniz yok!</p>
                    </div>
                </div>
            }
        </div>
    </div>

    <div class="row">

        <!-- Çalışanlar Kartı -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm personal-card h-100">
                <div class="card-body text-center">
                    <h4 class="card-title">Çalışanlar</h4>
                    <div class="table-responsive">
                        <table class="table table-hover employee-table">
                            <thead class="employee-table-header">
                                <tr class="text-center">
                                    <th>Ad Soyad</th>
                                    <th>Dahili Telefon Numara</th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var personel in ViewBag.personeller)
                                {
                                    <tr class="text-center">
                                        <td>@personel.personelAdSoyad</td>
                                        <td>@personel.personelDahili</td>
                                    </tr>
                                }
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>

        <!-- Yemek Tablosu Kartı -->
        <div class="col-lg-6 mb-4">
            <div class="card shadow-sm meal-card h-100">
                <div class="card-body">
                    <h5 class="card-title">Yemek Tablosu</h5>
                    <p class="card-text">
                        @{
                            var bugunYemek = ViewBag.BugunYemek as IsTakipSistemiMVC.Models.YemekTablo;
                        }
                        @if (bugunYemek != null)
                        {
                            <ul class="list-group mb-2">
                                <li class="list-group-item"> @bugunYemek.YemekAdi1</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi2</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi3</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi4</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi5</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi6</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi7</li>
                                <li class="list-group-item"> @bugunYemek.YemekAdi8</li>
                            </ul>
                        }
                        else
                        {
                        <p>Bugün için yemek menüsü bulunmamaktadır.</p>
                    }
                        </p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <style>
        /* Genel kart stili */
        .card {
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }

            .card:hover {
                transform: translateY(-5px);
                box-shadow: 0 8px 16px rgba(0, 0, 0, 0.2);
            }

        /* Çalışanlar Kartı Stili */
        .personal-card {
            background-color: #ffffff;
            border-left: 5px solid #17a2b8;
        }

        /* İş Kartı Stili */
        .job-card {
            background-color: #f8f9fa;
            border-left: 5px solid #28a745;
        }

            .job-card .card-header {
                background-color: #28a745;
                color: #ffffff;
            }

        /* Duyuru Kartı Stili */
        .small-card.card-color-1 {
            background-color: #e9ecef;
        }

        .announcement-card {
            padding: 15px;
            background-color: #ffffff;
            border-radius: 10px;
            border-left: 5px solid #007bff;
            transition: background-color 0.2s;
        }

            .announcement-card:hover {
                background-color: #f0f8ff;
            }

        /* Yemek Tablosu Kartı Stili */
        .meal-card {
            background-color: #ffffff;
            border-left: 5px solid #ffc107;
        }

            /* Yemek Listesi Stili */
            .meal-card .list-group-item {
                background-color: #fff3cd;
                border-color: #ffeeba;
                text-align: center;
            }

        /* Genel başlık stili */
        .card-title {
            color: #343a40;
            font-weight: bold;
        }

        .table thead {
            background-color: #007bff;
            color: #ffffff;
        }

        .table tbody tr:hover {
            background-color: #f1f1f1;
        }
    </style>
    </div>
